<!DOCTYPE html>


<html>
    <head>
        <meta charset="utf=8">
            <title>Invert colour</title>
            <link rel="stylesheet" href="css/style.css">
   </head>
    <body>
       <canvas id="canvas" width="640" height="480"/></canvas>
       <textarea id="log"></textarea>
        <script src="js/utils.js"></script>
        <script src="js/ball.js"></script>
        <script src="js/segment.js"></script>
        <script>


            function getCycle(cycle) {
                return angle = (Math.sin(cycle) * 45 + 90) * Math.PI / 180;
            }

            function spine(context, upperBack, lowerBack, cycleValue) {
                var angle = getCycle(cycleValue);
                upperBack.rotation = angle * 1.05;
                lowerBack.rotation = upperBack.rotation + (getCycle(cycleValue) * 3.8);
                lowerBack.x = upperBack.getPin().x;
                lowerBack.y = upperBack.getPin().y;
            }

            function upperBody(context, shoulders, upperBack, neck, head, cycleValue) {
              shoulders.rotation = getCycle(cycleValue) * -.1;
              neck.rotation = getCycle(cycleValue) * -.75;
              shoulders.x = upperBack.x - (shoulders.width / 2);
              shoulders.y = neck.y = upperBack.y;
              neck.x = shoulders.x + (shoulders.width / 2);
              // neck.y = shoulders.y;
              head.x = neck.x + head.radius / 1.4;
              head.y = neck.y / 1.7;
            }

            function leftArm(context, upperLeft, leftFore, shoulders, cycleValue) {
              upperLeft.rotation = getCycle(cycleValue) * .75;
              upperLeft.x = shoulders.getPin().x;
              upperLeft.y = shoulders.getPin().y;
              leftFore.x = upperLeft.getPin().x;
              leftFore.y = upperLeft.getPin().y;
            }

            function rightArm(context, upperRight, rightFore, shoulders, cycleValue) {
              upperRight.rotation = getCycle(cycleValue) * 1.05;
              upperRight.x = shoulders.getPin().x - shoulders.width;
              upperRight.y = shoulders.getPin().y;
              rightFore.x = upperRight.getPin().x;
              rightFore.y = upperRight.getPin().y;
            }

            function getHips(context, hips, lowerBack, cycleValue) {
                hips.rotation = getCycle(cycleValue) * -.1;
                hips.x = lowerBack.getPin().x - (hips.width / 2);
                hips.y = lowerBack.getPin().y + (hips.height / 2);
            }

            function rightLeg(context, rightThigh, rightCalf, rightFoot, hips, cycleValue) {
              rightThigh.rotation = getCycle(cycleValue) * .95;
              rightCalf.rotation = getCycle(cycleValue) * 1.35;
              rightThigh.x = hips.getPin().x - hips.width;
              rightThigh.y = hips.getPin().y;
              rightCalf.x = rightThigh.getPin().x;
              rightCalf.y = rightThigh.getPin().y;
              rightFoot.x = rightCalf.getPin().x;
              rightFoot.y = rightCalf.getPin().y;
            }

            function leftLeg(context, leftThigh, leftCalf, leftFoot, hips, cycleValue) {
              leftThigh.rotation = getCycle(cycleValue) * .55;
              leftCalf.rotation = getCycle(cycleValue) * 1.10;
              leftThigh.x = hips.getPin().x;
              leftThigh.y = hips.getPin().y;
              leftCalf.x = leftThigh.getPin().x;
              leftCalf.y = leftThigh.getPin().y;
              leftFoot.x = leftCalf.getPin().x;
              leftFoot.y = leftCalf.getPin().y;
            }


            window.onload = function()
            {
                var canvas = document.getElementById('canvas'),
                    context = canvas.getContext('2d'),
                    mouse = utils.captureMouse(canvas),
                    neck = new Segment(30,20),
                    shoulders = new Segment(30, 20),
                    upperLeft = new Segment(100, 20, '#FF0000'),
                    upperRight = new Segment(100, 20, '#00FF00'),
                    leftFore = new Segment(100, 20, '#0000FF'),
                    rightFore = new Segment(100, 20, '#000000'),
                    hips = new Segment(20, 20, '#00000F'),
                    leftThigh = new Segment(100, 20),
                    rightThigh = new Segment(100, 20),
                    leftCalf = new Segment(100, 20),
                    rightCalf = new Segment(100, 20),
                    upperBack = new Segment(80, 20),
                    lowerBack = new Segment(60, 20),
                    leftFoot = new Segment(25, 20),
                    rightFoot = new Segment(25, 20),

                    head = new Ball(30),
                    leftGlove = new Ball(20),
                    rightGlove = new Ball(),
                    cycle = 0;

                upperBack.x = canvas.width / 2;
                upperBack.y = canvas.height / 4;

                lowerBack.x = upperBack.getPin().x - 10;
                lowerBack.y = upperBack.getPin().y;

                function drawFrame() {
                	window.requestAnimationFrame(drawFrame, canvas);
                  context.clearRect(0, 0, canvas.width, canvas.height);
                  cycle = 0.05;

                spine(context, upperBack, lowerBack, cycle);
                upperBody(context, shoulders, upperBack, neck, head, cycle);
                leftArm(context, upperLeft, leftFore, shoulders, cycle);
                rightArm(context, upperRight, rightFore, shoulders, cycle);
                getHips(context, hips, lowerBack, cycle);

                leftLeg(context, leftThigh, leftCalf, leftFoot, hips, cycle);
                rightLeg(context, rightThigh, rightCalf, rightFoot, hips, cycle);


                neck.draw(context);
                head.draw(context);
                upperBack.draw(context);
                lowerBack.draw(context);
                upperLeft.draw(context);
                leftFore.draw(context);
                shoulders.draw(context, true);
                upperRight.draw(context);
                rightFore.draw(context);
                leftThigh.draw(context);
                leftCalf.draw(context);
                hips.draw(context);
                rightThigh.draw(context);
                rightCalf.draw(context);
                leftFoot.draw(context);
                rightFoot.draw(context);

                }
                drawFrame();
            };
        </script>
    </body>
</html>
